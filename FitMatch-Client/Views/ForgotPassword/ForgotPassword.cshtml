
@{
    Layout = null;
    ViewData["Title"] = "ForgotPassword";
}

<script src="https://unpkg.com/vue@3"></script>
<script src="https://unpkg.com/vuex@4"></script>
<link href="/css/bootstrap.min.css" rel="stylesheet">

<!-- ForgotPassword.html -->
<div id="forgot-password-app">
    <h2>忘記密碼</h2>
    <div>
        <input type="email" v-model="email" placeholder="請輸入註冊的 Email">
        <button v-on:click="requestReset">提交</button>
    </div>
</div>

<script>
    const forgotPasswordApp = Vue.createApp({
        data() {
            return {
                email: ''
            }
        },
        methods: {
            async requestReset() {
                try {
                    const response = await fetch("https://localhost:7011/api/Login/requestResetPassword", {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ Email: this.email })
                    });

                    if (response.status === 200) {
                        alert("重設密碼的連結已發送至您的 Email。");
                    } else {
                        alert("發生錯誤，請重新嘗試。");
                    }
                } catch (error) {
                    console.log('發生錯誤', error);
                }
            }
        }
    });

    forgotPasswordApp.mount('#forgot-password-app');
</script>


