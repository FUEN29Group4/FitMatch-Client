@{
    ViewData["Title"] = "Match";
}
<script src="https://unpkg.com/vue@3"></script>

<style>
    .match-title .page-header {
        background: none;
    }

    body {
        background-image: url('/images/bg/matchbgimage.jpg');
        background-size: cover;
    }

    .tcircle .team-item {
        /* display: inline-block; */
        position: relative;
        width: 150px;
        height: 150px;
        overflow: hidden;
        border-radius: 50%;
    }

        .tcircle .team-item img {
            width: 100%;
            height: auto;
        }

    /* rock照片 */
    .rock .circle-container {
        width: 300px;
        /* 圓的寬度 */
        height: 300px;
        /* 圓的高度，應與寬度相同以產生完美的圓形 */
        border-radius: 50%;
        overflow: hidden;
        /* 隱藏超出的部分 */
        position: relative;
        /* 使內部的 img 元素能夠使用絕對定位 */
    }

    .rock .trainer-img {
        width: 100%;
        height: auto;
    }

    /* 巨石卡片 */
    .rock .card {
        border: none;
    }

    .rock-card {
        background: linear-gradient(90deg, #F24B88 0%, #BD00FF 100%);
        border-radius: 10px
    }

    .rock .rock-card {
        position: relative;
    }

        .rock .rock-card::before {
            content: "";
            position: absolute;
            top: -30px;
            left: -30px;
            width: 100%;
            height: 100%;
            background: linear-gradient(10deg, #BD00FF 0%, #0f0623 100%);
            border-radius: 10px;
            z-index: -1;
        }

    /* 詳細資訊的視窗 */
    .detailcard {
        background: linear-gradient(90deg, #F24B88 0%, #BD00FF 100%);
        border-radius: 10px
    }

    /* 上課照片 */
    .photocarousel.image-box {
        position: relative;
        height: 250px;
        overflow: hidden;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .photocarousel .image-list {
        display: flex;
        position: absolute;
        transform: translateX(0);
        transition: transform 0.02s linear;
    }

    .photocarousel .item {
        width: 200px;
        height: 200px;
        margin-left: 2px;
        font-size: 5rem;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
        padding-right: 10px;
    }

        .photocarousel .item img {
            width: 100%;
            /* 確保圖像的寬度為100% */
            height: 100%;
            /* 確保圖像的高度為100% */
            object-fit: cover;
            /* 讓圖像保持其比例，但完全覆蓋它的容器 */
        }

    /* 尋找課程內容 */
    .course-photo .team-item {
        position: relative;
        width: 200px;
        height: 200px;
        overflow: hidden;
        z-index: 1;
    }

        .course-photo .team-item img {
            width: 100%;
            height: auto;
        }

    /* 尋找健身房 */
    .gym-photo .team-item {
        /* display: inline-block; */
        position: relative;
        width: 100%;
        height: 200px;
        overflow: hidden;
    }

    .team-img {
        height: 200px;
        /* 设置一个明确的高度 */
        overflow: hidden;
        position: relative;
    }

    .gym-photo .team-img img {
        height: 100%;
        width: 100%;
        object-fit: cover;
    }

    /* 學員評價 */
    .review-box {
        position: relative;
        overflow: hidden;
        display: flex;
        justify-content: center;
        padding: 15px 0;
        border-radius: 5px;
        box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
        /* background-color: #f8f8f8; */
        height: 180px;
    }

        .review-box .review-list {
            display: flex;
            position: absolute;
            /* transform: translateX(0); */
            /* transition: transform 0.02s linear; */
        }

        .review-box .item {
            width: 200px;
            min-height: 120px;
            margin: 0 12px;
            background: #ffffff;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 15px;
            font-size: 14px;
            /* 設定整體字體大小 */
            line-height: 1.5;
            /* 調整行高以提高可讀性 */
        }

            .review-box .item p {
                margin-bottom: 10px;
                /* 留下一些空間在評價和名字之間 */
                font-style: italic;
                /* 讓留言有點斜體，更像引用 */
                text-align: center;
            }

            .review-box .item span {
                /* font-size: 16px; */
                /* font-weight: bold; */
                /* display: block; */
                /* text-align: center; */
                color: #F24B88;
            }

    .btn-dark:hover {
        background-color: #7c7c7c;
    }

    /* 教練頭上標籤 */
    .top-label {
        position: relative;
        /* background-color: red; */
        width: 60px;
        color: white;
        padding: 5px 10px;
        transform: rotate(-35deg) translate(-20px, 35px);
        transform-origin: 0% 0%;
        z-index: 999;
        border-radius: 30px 30px 0 0;
    }

    #reviews .item {
        background: white;
        border: 1px solid #ccc;
        padding: 20px;
        border-radius: 5px;
        margin: 10px;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        width: 200px;
    }
</style>
<div class="container">
    <!-- Page Header Start -->
    <div class="match-title">
        <div class="container-fluid page-header py-5 mb-4 wow fadeIn" data-wow-delay="0.1s">
            <div class="container text-center py-5">
                <h1 class="text-white text-uppercase mb-3 animated slideInDown">與我們卓越的金牌教練共同提升您的運動體驗!</h1>
                <h4 class="breadcrumb-item text-white m-5">針對個人需求提供量身定制的教練服務</h4>
            </div>
            <div class="container text-center py-5">
                <a href="trainer.html" class="btn btn-dark p-4 px-5 me-5"
                   style="border-radius:10px; border: 1px solid #7c7c7c;">
                    <h3>找教練</h3>
                </a>
                <a href="gym.html" class="btn btn-dark p-4 px-5 ms-5"
                   style="border-radius:10px;border: 1px solid #7c7c7c;">
                    <h3>找場館</h3>
                </a>
            </div>
        </div>
    </div>
    <!-- Page Header End -->
    <!-- 推薦教練頭像Start -->
    <div id="trainerTop5">
        <div class="tcircle container-xxl py-1">
            <div class="row g-4 d-flex justify-content-center">
                <div class="col-lg-2 col-md-4 wow fadeInUp" data-wow-delay="0.1s"
                     v-for="(trainer, index) in trainerteams" :key="trainer.trainerId">
                    <div class="top-label">TOP{{ index + 1 }}</div>
                    <div class="team-item mx-auto d-flex align-items-center">
                        <div class="team-img position-relative overflow-hidden d-flex align-items-center">

                            <img class="img-fluid" :src="'data:image/jpeg;base64,' + trainer.photo"
                                 :alt="trainer.trainerName">
                            <div class="team-social">
                                <a class="btn btn-primary"
                                   :href="'/Match/TrainerResume?id=' + trainer.trainerId">我要預約</a>
                            </div>
                        </div>
                    </div>
                    <div class="text-center p-4">
                        <h5 class="text-uppercase">{{ trainer.trainerName }}</h5>
                    </div>
                </div>
            </div>
        </div>
        <!-- 推薦教練頭像End -->
        <!-- 巨石強森推薦區 Start -->
        <div class="rock container-xxl py-1 wow fadeInUp" data-wow-delay="0.1s">
            <div class="card bg-transparent mb-4" style="width: 100%;">
                <div class="row no-gutters">
                    <!-- 教練大頭貼 -->
                    <div class="col-md-6 p-5">
                        <div class="circle-container mx-auto">
                            @*<img src="~/images/教練/巨石強森.jpg" alt="" class="trainer-img">*@
                            <img class="trainer-img" :src="'data:image/jpeg;base64,' + trainer1Photo" alt="巨石強森" v-if="trainer1Photo">

                        </div>
                        <!-- 教練名字 -->
                        <h3 class="card-title text-light text-center py-2">巨石強森</h3>


                        <!-- 社群 -->
                        <div class="d-flex align-items-center mb-2">
                            <p class="card-subtitle letter-spacing m-auto">
                                <i class="fa-brands fa-square-facebook fa-xl me-2 fc-232323"></i>
                                <i class="fa-brands fa-linkedin fa-xl me-2 fc-232323"></i>
                                <i class="fa-brands fa-square-instagram fa-xl fc-232323"></i>
                            </p>
                        </div>
                    </div>


                    <div class="col-md-5 d-flex align-items-center">
                        <div class="rock-card card-body team-wrap pl-5 text-light pt-5">
                            <h4 class="px-3">超越極限，與巨石強森一同塑造你的力量</h4>
                            <p class="text-black fw-bold px-3 pt-3">
                                巨石強森憑藉自身的豐富經驗和知識，為你提供全面的健身指導。無論你是初學者還是有經驗的健身愛好者，他都能根據你的需求和目標制定量身定制的訓練計劃。他強調正確的技巧和姿勢，並注重每個動作的細節，確保你的訓練效果最大化。
                            </p>
                            <div class="d-flex justify-content-center">
                                <div class="btn btn-dark" style="border-radius:8px" data-bs-toggle="modal"
                                     data-bs-target="#myModal">
                                    查看詳細資訊
                                </div>
                            </div>
                            <!-- 詳細資訊 -->
                            <div class="modal fade" id="myModal" tabindex="-1"
                                 aria-labelledby="exampleModalLabel" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered">
                                    <div class="modal-content detailcard p-2">
                                        <div class="d-flex justify-content-end">
                                            <button type="button" class="btn-close " data-bs-dismiss="modal"
                                                    aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body text-light">
                                            <div class="modal-body">
                                                <ul>
                                                    <li>原名為洛克（The Rock），在1996年加入世界摔角娛樂（WWE，前身為WWF）。</li>
                                                    <li>曾經11次獲得WWE世界冠軍。</li>
                                                    <li>獲得兩次WWE洲際冠軍和五次WWE雙打冠軍。</li>
                                                    <li>
                                                        在2000年至2001年間成為WWE世界冠軍連續擊敗「斯杰夫・奧斯汀」(Stone Cold Steve
                                                        Austin)，稱霸WWE。
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="modal-footer d-flex justify-content-center">
                                            <a href="/Match/TrainerResume?id=1" class="btn btn-dark"
                                               style="border-radius:8px">立即預約</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- 詳細資訊End -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- 巨石強森推薦區 End -->
    <!-- 實際上課照片Start -->
    <div class="container wow fadeInUp" data-wow-delay="0.1s">
        <h3>實際上課照片</h3>
        <div class="image-box photocarousel">
            <div class="image-list">
                <div class="item"></div>
            </div>
        </div>
    </div>
    <!-- 實際上課照片End -->
    <!-- 尋找你想媒合的課程內容Start -->
    <div class="course-photo container-xxl wow fadeInUp pt-3" data-wow-delay="0.1s">
        <h3>尋找你想媒合的課程內容</h3>
        <div class="row g-4">
            <div class="col-lg-2 col-md-4">
                <div class="team-item mx-auto">
                    <div class="team-img position-relative overflow-hidden align-items-center">
                        <img class="img-fluid" src="~/images/課程/戰繩.jpg" alt="">
                        <div class="team-social">
                            <a class="btn btn-primary" href="course3.html">我要預約</a>
                        </div>
                    </div>
                    <div class="bg-darkgray text-center p-2">
                        <h5 class="text-uppercase">戰繩</h5>
                    </div>
                </div>

            </div>
            <div class="col-lg-2 col-md-4 wow fadeInUp" data-wow-delay="0.3s">
                <div class="team-item mx-auto">
                    <div class="team-img position-relative overflow-hidden align-items-center">
                        <img class="img-fluid" src="~/images/課程/有氧.jpg" alt="">
                        <div class="team-social">
                            <a class="btn btn-primary" href="course2.html">我要預約</a>
                        </div>
                    </div>
                    <div class="bg-darkgray text-center p-2">
                        <h5 class="text-uppercase">有氧</h5>
                    </div>
                </div>

            </div>
            <div class="col-lg-2 col-md-4 wow fadeInUp" data-wow-delay="0.5s">
                <div class="team-item mx-auto">
                    <div class="team-img position-relative overflow-hidden d-flex align-items-center">
                        <img class="img-fluid" src="~/images/課程/核心訓練.jpg" alt="">
                        <div class="team-social">
                            <a class="btn btn-primary" href="course6.html">我要預約</a>
                        </div>
                    </div>
                    <div class="bg-darkgray text-center p-2">
                        <h5 class="text-uppercase">核心訓練</h5>
                    </div>
                </div>

            </div>
            <div class="col-lg-2 col-md-4 wow fadeInUp" data-wow-delay="0.7s">
                <div class="team-item mx-auto">
                    <div class="team-img position-relative overflow-hidden d-flex align-items-center">
                        <img class="img-fluid" src="~/images/課程/格鬥.jpg" alt="">
                        <div class="team-social">
                            <a class="btn btn-primary" href="course5.html">我要預約</a>
                        </div>
                    </div>
                    <div class="bg-darkgray text-center p-2">
                        <h5 class="text-uppercase">格鬥</h5>
                    </div>
                </div>

            </div>
            <div class="col-lg-2 col-md-4 wow fadeInUp" data-wow-delay="0.1s">
                <div class="team-item mx-auto">
                    <div class="team-img position-relative overflow-hidden d-flex align-items-center">
                        <img class="img-fluid" src="~/images/課程/瑜珈.jpg" alt="">
                        <div class="team-social">
                            <a class="btn btn-primary" href="course4.html">我要預約</a>
                        </div>
                    </div>
                    <div class="bg-darkgray text-center p-2">
                        <h5 class="text-uppercase">瑜珈</h5>
                    </div>
                </div>

            </div>
            <div class="col-lg-2 col-md-4 wow fadeInUp" data-wow-delay="0.1s">
                <div class="team-item mx-auto">
                    <div class="team-img position-relative overflow-hidden d-flex align-items-center">
                        <img class="img-fluid" src="~/images/課程/重量訓練.jpg" alt="">
                        <div class="team-social">
                            <a class="btn btn-primary" href="course1.html">我要預約</a>
                        </div>
                    </div>
                    <div class="bg-darkgray text-center p-2">
                        <h5 class="text-uppercase">重量訓練</h5>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <!-- 尋找你想媒合的課程內容End -->
    <!-- 學員評價Start -->
    <div class="container wow fadeInUp pt-5" data-wow-delay="0.1s" id="reviews">
        <h3>學員評價</h3>

        <div class="review-box" @@mouseover="pauseScroll" @@mouseleave="resumeScroll" id="box1">
            <div class="review-list" ref="list1">
                <div class="item" v-for="review in reviews">
                    <p>{{ review.comment }}</p>
                    <span>- {{ review.memberName }}</span>
                </div>
            </div>
        </div>

        <div class="review-box" @@mouseover="pauseScroll" @@mouseleave="resumeScroll" id="box2">
            <div class="review-list" ref="list2">
                <div class="item" v-for="review in reviews">
                    <p>{{ review.comment }}</p>
                    <span>- {{ review.memberName }}</span>
                </div>
            </div>
        </div>
        <!-- <div class="review-box" id="box1">
            <div class="review-list" id="list1">
                <div class="item"></div>
            </div>
        </div> -->
        <!-- <div class="review-box" id="box2">
            <div class="review-list" id="list2">
                <div class="item"></div>
            </div>
        </div> -->
    </div>
    <!-- 學員評價End -->
    <!-- 與我們合作的場地Start -->
    <div class="gym-photo course-photo container-xxl pt-5 wow fadeInUp" data-wow-delay="0.1s" id="Gyms">
        <h3>與我們合作的健身場館</h3>
        <div class="row g-4 justify-content-between">
            <div class="col-lg-3 col-md-3" v-for="gym in gyms" :key="gym.gymId">
                <div class="team-item mx-auto">
                    <div class="team-img position-relative overflow-hidden align-items-center">
                        <img class="img-fluid" :src="'data:image/jpeg;base64,' + gym.photo"
                             :alt="gym.gymName">
                        <div class="team-social">
                            <a class="btn btn-primary" :href="'/Gym/Gym?id=' + gym.gymId">我要預約</a>
                        </div>
                    </div>

                </div>
                <div class="bg-darkgray text-center p-2">
                    <h5 class="text-uppercase">{{ gym.gymName }}</h5>
                </div>

            </div>
        </div>
    </div>
    <!-- 與我們合作的場地End -->

</div>
<script>
    const app1 = Vue.createApp({
        data() {
            return {
                trainerteams: [],
                trainer1Photo:null
            };
        },
        mounted() {
            this.fetchTrainers();
        },
        methods: {
            async fetchTrainers() {
                try {
                    const response = await fetch('https://localhost:7011/api/Match/TrainerTOP5');
                    const data = await response.json();
                    this.trainerteams = data;
                    // 找到 trainerId 為 1 的教練
                    const trainer1 = data.find(trainer => trainer.trainerId === 1);

                    if (trainer1) {
                        this.trainer1Photo = trainer1.photo;
                    }
                } catch (error) {
                    console.error('Error:', error);
                }
            }
        }
    }).mount("#trainerTop5");
    const app2 = Vue.createApp({
        data() {
            return {
                gyms: []
            };
        },
        mounted() {
            this.fetchTrainers();
        },
        methods: {
            async fetchTrainers() {
                try {
                    const response = await fetch('https://localhost:7011/api/Match/GymTOP4');
                    const data = await response.json();
                    this.gyms = data;
                } catch (error) {
                    console.error('Error:', error);
                }
            }
        }
    }).mount("#Gyms");
    // 學員評價輪播
    const app3 = Vue.createApp({
        data() {
            return {
                reviews: [],
                itemWidth: 224, // 200 + 2 * 24
                scrollSpeed: 0.5,
                currentPosition1: 0,
                currentPosition2: -224  //初始位置
            }
        },
        mounted() {
            this.fetchReviews();
            this.startScrolling();
        },
        methods: {
            async fetchReviews() {
                try {
                    const response = await fetch('https://localhost:7011/api/Match/Reviews');
                    const data = await response.json();
                    this.reviews = data;
                    // this.currentPosition2 = -this.itemWidth * this.reviews.length;
                } catch (error) {
                    console.error("Failed to fetch reviews:", error);
                }
            },
            startScrolling() {
                const move = () => {
                    this.currentPosition1 -= this.scrollSpeed;
                    this.currentPosition2 += this.scrollSpeed;
                    const totalWidth = this.itemWidth * this.reviews.length;

                    if (this.currentPosition1 <= -totalWidth) {
                        this.currentPosition1 += totalWidth;
                    }

                    if (this.currentPosition2 >= 0) {
                        this.currentPosition2 -= totalWidth;
                    }

                    this.$refs.list1.style.transform = `translateX(${this.currentPosition1}px)`;
                    this.$refs.list2.style.transform = `translateX(${this.currentPosition2}px)`;

                    requestAnimationFrame(move);
                };
                move();
                // move2();
            },
            pauseScroll() {
                this.scrollSpeed = 0;
            },
            resumeScroll() {
                this.scrollSpeed = 0.5;
            }
        }
    }).mount("#reviews");

    // 上課照片輪播
    var images = [];
    for (var i = 1; i <= 32; i++) {
        images.push(`/images/上課照片/${i}.jpg`);
    }

    function loadImages() {
        var list = document.querySelector('.image-list');
        var box = document.querySelector('.image-box');
        var itemWidth = 200 + 2 * 24;
        var scrollSpeed = 0.5;
        var currentPosition = 0;

        function addImage(src) {
            var item = document.createElement('div');
            item.className = 'item';
            var img = document.createElement('img');
            img.src = src;
            item.appendChild(img);
            list.appendChild(item);
        }

        function clearImages() {
            list.innerHTML = ''; // 清空原有照片
        }

        function fillImages() {
            clearImages();
            for (var k = 0; k < Math.ceil(1296 / itemWidth); k++) {
                for (var i = 0; i < images.length; i++) {
                    addImage(images[i]);
                }
            }
        }

        fillImages();

        function move() {
            currentPosition -= scrollSpeed;
            if (currentPosition <= -itemWidth * images.length) {
                currentPosition = 0;
            }
            list.style.transform = `translateX(${currentPosition}px)`;
            requestAnimationFrame(move);
        }

        move();

        box.onmouseover = function () {
            scrollSpeed = 0;
        };

        box.onmouseleave = function () {
            scrollSpeed = 0.5;
        };
    }

    document.addEventListener('DOMContentLoaded', loadImages);
</script>