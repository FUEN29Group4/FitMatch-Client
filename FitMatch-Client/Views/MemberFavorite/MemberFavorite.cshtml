@{
    ViewData["Title"] = "MemberFavorite";
}

<script src="https://unpkg.com/vue@3"></script>
<script src="https://unpkg.com/vuex@4"></script>

<div style="background-color: #fff">
    <!-- Page Header Start -->
    <div class="container-fluid page-header py-5 mb-5 wow fadeIn"
         data-wow-delay="0.1s">
        <div class="container text-center py-5">
            <h1 class="display-3 text-white text-uppercase mb-3 animated slideInDown">
                FAVORITE
            </h1>
            <nav aria-label="breadcrumb animated slideInDown">
                <ol class="breadcrumb justify-content-center text-uppercase mb-0">
                    <li class="breadcrumb-item">
                        <a class="text-white" href="#">Home</a>
                    </li>
                    <li class="breadcrumb-item">
                        <a class="text-white" href="#">Pages</a>
                    </li>
                    <li class="breadcrumb-item text-primary active" aria-current="page">
                        MEMBER
                    </li>
                </ol>
            </nav>
        </div>
    </div>
    <!-- Page Header End -->
    <!-- body start -->

    <div class="container">
        <div class="container text-center">
            <nav style="
            --bs-breadcrumb-divider: url(
              &#34;data:image/svg + xml,
              %3Csvgxmlns='http://www.w3.org/2000/svg'width='8'height='8'%3E%3Cpathd='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z'fill='currentColor'/%3E%3C/svg%3E&#34;
            );
          "
                 aria-label="breadcrumb">
                <ol class="breadcrumb" style="color: rgb(0, 0, 0)">
                    <li class="breadcrumb-item">
                        <a href="index.html" style="color: rgb(0, 0, 0)">首頁</a>
                    </li>
                    <li class="breadcrumb-item">
                        <a href="personal_member.html" style="color: rgb(0, 0, 0)">我的會員專區</a>
                    </li>
                    <li class="breadcrumb-item active" aria-current="page">收藏清單</li>
                </ol>
            </nav>
        </div>
    </div>

    <div class="container">
        <nav class="navbar navbar-expand-lg bg-body-tertiary">
            <div class="container-fluid">
                <div class="container member line">
                    <div class="nav">
                        <a style="color: black"
                           href="personal_member.html"
                           class="nav-link nav-item">基本資料</a>
                        <a style="color: black"
                           href="personal_member_Order_Traking.html"
                           class="nav-link nav-item">訂單查詢</a>
                        <a style="color: black"
                           href="personal_member_favorite_list.html"
                           class="nav-link nav-item">收藏清單</a>
                        <a style="color: black"
                           href="personal_member_My_Schedule.html"
                           class="nav-link nav-item">我的課表</a>
                        <a style="color: black"
                           href="personal_member_Customer_Service_Records.html"
                           class="nav-link nav-item">客服紀錄</a>
                    </div>
                </div>
            </div>
        </nav>
        <hr />
    </div>

    <div class="container">
        <ul class="list-style-type-none">
            <li>李大明</li>
            <li>一般會員</li>
            <li>ispan@yahoo.com.tw</li>
            <li>年度累積消費金額 NT.3,509</li>
           @*  <li>{{Member.MemberName}}</li>
            <li>一般會員</li>
            <li>{{Member.Email}}</li>
            <li>年度累積消費金額 NT.{{Order.TotalPrice}}</li> *@
        </ul>
        <hr />
    </div>

    <div class="container">
        <button type="button" class="btn btn-primary">
            <a class="text-light" href=" personal_member_favorite_list.html">我的教練</a>
        </button>
        <button type="button" class="btn btn-primary">
            <a class="text-light" href=" personal_member_favorite_list_Gym.html">我的健身房</a>
        </button>
        <button type="button" class="btn btn-primary">
            <a class="text-light"
               href="personal_member_favorite_list_Restaurant.html">我的餐廳</a>
        </button>
        <hr />
    </div>


    <main id="app">
        <div class="container-md pt-3" style="padding-bottom: 50px">
            <div class="row g-2 row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-5">
                <!-- 使用v-for來迭代每個MemberFavorite -->
                <div class="col"  v-for="memberFavorite in MemberFavorites" :key="memberFavorite.memberFavoriteId">
                    <div v-for="trainer in memberFavorite.trainers" :key="trainer.trainerId">
                        <div class="card mh-250px card1 overflow-hidden">
                            <div class="card-image">
                                @* <img :src="'data:image/jpeg;base64,' + trainer.photo" alt="Trainer Image" style="width: 330px; height: 250px; object-fit: cover;" /> *@
                                <img :src="'/images/教練/' + trainer.photo" alt="Trainer Image"  />


                            </div>
                            <div class="card-header bg-white border-bottom-0 fz-12px ps-2 d-flex align-items-center"></div>
                            <div class="card-body">
                                <a class="text-black text-decoration-none stretched-link" href="#">
                                    {{ trainer.introduce || '無介紹可用。' }}
                                </a>
                            </div>
                            <div class="card-footer bg-white border-top-0 fz-12px d-flex align-items-center p-2 ">
                                <span class="me-auto">{{trainer.trainerName || '無姓氏'}}</span>
                                <i class="fa-solid fa-heart" style="color:red;"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>




    <!-- body end -->
</div>


<style scoped>
  
    /* 圓形框框樣式 */
    .card-image img {
        width: 250px;
        height: 330px;
        object-fit: cover; /* 確保圖片在容器內完整顯示 */
        overflow: hidden;
    }


    .card1:hover img {
        transform: scale(1.1);
    }



    .card {
        flex-direction: column;
        border-radius:20px;
        height: 100%;
        display: flex;
    }




</style> 

<script>
    Vue.createApp({

        data() {
            return {
                MemberFavorites: [],
            };
        },
        mounted() {
            this.MemberFavorite();
        },
        methods: {
            MemberFavorite() {
                let urlParams = new URLSearchParams(window.location.search);
                let id = urlParams.get('id');  // 從URL中獲取id

                if (!id) {
                    console.error("ID not provided in the URL");
                    return;
                }

                fetch(`https://localhost:7011/api/MemberFavorite/${id}`)
                    .then((response) => {
                        if (!response.ok) {
                            return response.text().then(text => {
                                throw new Error(`API request failed with status ${response.status}: ${text}`);
                            });
                        }
                        return response.json();
                    })
                    .then((data) => {
                        this.MemberFavorites = data;
                    })
                    .catch((error) => {
                        console.error("API 請求失敗: " + error.message);
                    });
            },

        },
    }).mount('#app')

</script>
